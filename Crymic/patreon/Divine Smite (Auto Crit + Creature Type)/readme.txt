My smart divine smart macro grabs the following off a previous attack.
The target and if the attack was a critical.
This macro works for Midi-qol, Item macro. For easy of use, Divine Smite is a level 1 spell.

Required Modules
Midi-QoL

Updates
3/31/21 : Updated for latest Midi-Qol
5/11/21: Updated for 8.x
10/12/21: Added Improved Smite, Updated actor check to support all
11/6/21: Fixed some bugs