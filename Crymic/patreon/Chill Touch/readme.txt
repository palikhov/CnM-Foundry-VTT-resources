This cantrip auto detects the target if they are undead or not. If they are, it will give them disadvantage. I didn't include the healing prevention portion. I do have a thoughts of a solution for this, may revisit it later on.

You create a ghostly, skeletal hand in the space of a creature within range. Make a ranged spell attack against the creature to assail it with the chill of the grave. On a hit, the target takes 1d8 necrotic damage, and it can't regain hit points until the start of your next turn. Until then, the hand clings to the target.
If you hit an undead target, it also has disadvantage on attack rolls against you until the end of your next turn.

Modules Required
Midi-QoL
DAE
Advanced Macros
Item Macro (optional)

Updates
8/14/21: Removed the need for callback macro. Added a NPC or character check for effects.
10/27/21: Added better detection of Undead. Will apply healing block if undead.